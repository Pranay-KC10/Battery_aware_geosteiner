<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoSteiner Network Optimization - Budget-Constrained Solution</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }
        .network-container { display: flex; gap: 30px; margin: 30px 0; }
        .network-svg { flex: 2; border: 2px solid #ddd; border-radius: 8px; background: #fafafa; }
        .sidebar { flex: 1; }
        .terminal-label { font-size: 14px; font-weight: bold; fill: #333; }
        .battery-text { font-size: 12px; fill: #666; }
        .metrics, .legend, .fst-details { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #3498db; }
        .source-constraint { background: #d4edda; padding: 15px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #28a745; }
        .section { background: #fff; margin: 30px 0; padding: 25px; border-radius: 8px; border: 1px solid #e1e8ed; }
        .constraint-check { padding: 10px; margin: 8px 0; border-radius: 5px; background: #f8f9fa; border-left: 3px solid #28a745; }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 8px; border-bottom: 1px solid #eee; }
        .legend-item { display: flex; align-items: center; margin: 10px 0; }
        .legend-symbol { width: 20px; height: 20px; margin-right: 10px; border-radius: 50%; }
        .covered-terminal { background: #00ff00; border: 2px solid #333; }
        .uncovered-terminal { background: none; border: 2px dashed #999; position: relative; }
        .selected-fst { background: #007bff; }
        .steiner-point { background: #6c757d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåê GeoSteiner Network Optimization - Budget-Constrained Solution</h1>
        <div class="network-container">
            <svg width="800" height="600" class="network-svg">
                <line x1="73" y1="385" x2="194" y2="424" stroke="#3498db" stroke-width="6" opacity="0.7"/>
                <line x1="73" y1="385" x2="272" y2="482" stroke="#3498db" stroke-width="6" opacity="0.7"/>
                <line x1="194" y1="424" x2="272" y2="482" stroke="#3498db" stroke-width="6" opacity="0.7"/>
                <line x1="194" y1="424" x2="451" y2="272" stroke="#3498db" stroke-width="6" opacity="0.7"/>
                <circle cx="73" cy="385" r="12" fill="#f39c12" stroke="#333" stroke-width="2"/>
                <text x="73" y="365" text-anchor="middle" class="terminal-label">0</text>
                <text x="73" y="410" text-anchor="middle" class="battery-text">56.9%</text>
                <circle cx="194" cy="424" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="194" y="404" text-anchor="middle" class="terminal-label">1</text>
                <text x="194" y="449" text-anchor="middle" class="battery-text">74.5%</text>
                <circle cx="261" cy="537" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="261" y="517" text-anchor="middle" class="terminal-label">2</text>
                <text x="261" y="562" text-anchor="middle" class="battery-text">70.6%</text>
                <circle cx="272" cy="482" r="12" fill="#e67e22" stroke="#333" stroke-width="2"/>
                <text x="272" y="462" text-anchor="middle" class="terminal-label">3</text>
                <text x="272" y="507" text-anchor="middle" class="battery-text">32.8%</text>
                <circle cx="107" cy="274" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="107" y="254" text-anchor="middle" class="terminal-label">4</text>
                <text x="107" y="299" text-anchor="middle" class="battery-text">69.7%</text>
                <circle cx="737" cy="440" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="737" y="420" text-anchor="middle" class="terminal-label">5</text>
                <text x="737" y="465" text-anchor="middle" class="battery-text">60.7%</text>
                <circle cx="451" cy="272" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="451" y="252" text-anchor="middle" class="terminal-label">6</text>
                <text x="451" y="297" text-anchor="middle" class="battery-text">65.2%</text>
                <circle cx="607" cy="258" r="12" fill="#52c41a" stroke="#333" stroke-width="2"/>
                <text x="607" y="238" text-anchor="middle" class="terminal-label">7</text>
                <text x="607" y="283" text-anchor="middle" class="battery-text">73.2%</text>
            </svg>
            <div class="sidebar">
                <div class="source-constraint">
                    <h3>üéØ Source Terminal Constraint</h3>
                    <p><strong>‚úÖ Active:</strong> Terminal 0 (source) is always covered</p>
                    <p><strong>Formula:</strong> <code>not_covered[0] = 0</code></p>
                    <p><strong>Status:</strong> <span style="color: #28a745;">‚úÖ Constraint satisfied</span></p>
                </div>
                <div class="metrics">
                    <h3>üìä Solution Metrics</h3>
                    <table>
                        <tr><td><strong>Selected FSTs:</strong></td><td>4 of 28</td></tr>
                        <tr><td><strong>Total Terminals:</strong></td><td>8</td></tr>
                        <tr><td><strong>Covered Terminals:</strong></td><td>8</td></tr>
                        <tr><td><strong>Uncovered Terminals:</strong></td><td>0</td></tr>
                        <tr><td><strong>Coverage Rate:</strong></td><td>100.0%</td></tr>
                        <tr><td><strong>Total Cost:</strong></td><td>1,495,410</td></tr>
                        <tr><td><strong>Budget Utilization:</strong></td><td>99.7%</td></tr>
                    </table>
                </div>
                <div class="legend">
                    <h3>üéØ Legend</h3>
                    <div class="legend-item">
                        <div class="legend-symbol covered-terminal"></div>
                        <span>Covered Terminal</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol uncovered-terminal"></div>
                        <span>Uncovered Terminal</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol steiner-point"></div>
                        <span>Steiner Point</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol selected-fst"></div>
                        <span>Selected FST Edge</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="metrics">
            <h3>üìÅ Input Files</h3>
            <table>
                <tr><td><strong>Terminals:</strong></td><td><code>fresh_run/terminals.txt</code></td></tr>
                <tr><td><strong>FSTs:</strong></td><td><code>fresh_run/fsts.txt</code></td></tr>
                <tr><td><strong>Solution:</strong></td><td><code>fresh_run/solution.txt</code></td></tr>
            </table>
        </div>
        <div class="section">
            <h2>üìà Constraint Verification</h2>
            <div class="constraint-check constraint-satisfied">
                <strong>‚úÖ Terminal Coverage:</strong> All 8 terminals covered
            </div>
            <div class="constraint-check constraint-satisfied">
                <strong>‚úÖ Budget Constraint:</strong> Tree costs (1,495,410) ‚â§ Budget (1,500,000)
            </div>
            <div class="constraint-check constraint-satisfied">
                <strong>‚úÖ Spanning Constraint:</strong> Œ£(|FST|-1)√óx + Œ£not_covered = 7 ‚úì
            </div>
            <div class="constraint-check constraint-satisfied">
                <strong>‚úÖ Network Connectivity:</strong> All FSTs form one connected component
            </div>
        </div>
        <div class="section">
            <h2>üìä Selected FST Details</h2>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <thead style="background: #f8f9fa;">
                    <tr>
                        <th style="padding: 12px; border: 1px solid #ddd;">FST ID</th>
                        <th style="padding: 12px; border: 1px solid #ddd;">Terminals</th>
                        <th style="padding: 12px; border: 1px solid #ddd;">Steiner Points</th>
                        <th style="padding: 12px; border: 1px solid #ddd;">Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #e8f5e8;">
                        <td style="padding: 10px; border: 1px solid #ddd; background: #28a745; color: white; font-weight: bold;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T1</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">1</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T2</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #e8f5e8;">
                        <td style="padding: 10px; border: 1px solid #ddd; background: #28a745; color: white; font-weight: bold;">2</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T3</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">3</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T4</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">4</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T0, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T2</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #e8f5e8;">
                        <td style="padding: 10px; border: 1px solid #ddd; background: #28a745; color: white; font-weight: bold;">8</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T3</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">9</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T4</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">10</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #e8f5e8;">
                        <td style="padding: 10px; border: 1px solid #ddd; background: #28a745; color: white; font-weight: bold;">11</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">12</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T1, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">13</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T2, T3</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">14</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T2, T4</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">15</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T2, T5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">16</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T2, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">17</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T2, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">18</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T3, T4</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">19</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T3, T5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">20</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T3, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">21</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T3, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">22</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T4, T5</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">23</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T4, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">24</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T4, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">25</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T5, T6</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">26</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T5, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 10px; border: 1px solid #ddd; ">27</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">T6, T7</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">0</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Direct</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tech-details">
            <h2>üîß Technical Implementation Details</h2>

            <h3>Objective Function:</h3>
            <p><strong>Minimize:</strong> Œ£(tree_cost[i] + Œ±√óbattery_cost[i])√óx[i] + Œ≤√óŒ£not_covered[j]</p>

            <h3>Constraint Formulation:</h3>
            <ul>
                <li><strong>Budget Constraint:</strong> Œ£ tree_cost[i] √ó x[i] ‚â§ 1,500,000</li>
                <li><strong>Source Terminal Constraint:</strong> not_covered[0] = 0 (terminal 0 must always be covered)</li>
                <li><strong>Modified Spanning Constraint:</strong> Œ£(|FST[i]| - 1) √ó x[i] + Œ£not_covered[j] = 7</li>
                <li><strong>Soft Cutset Constraint 1:</strong> not_covered[j] ‚â§ 1 - x[i] ‚àÄ(i,j) where FST i contains terminal j</li>
                <li><strong>Soft Cutset Constraint 2:</strong> Œ£·µ¢ x[i] ‚â§ n¬∑(1 - not_covered[j]) ‚àÄj, where n = |{FSTs covering terminal j}|</li>
                <li><strong>Binary Constraints:</strong> x[i] ‚àà {0,1}, not_covered[j] ‚àà [0,1]</li>
            </ul>
        </div>
    </div>
</body>
</html>
